(()=>{var e={162:function(e,n,t){var o,a;void 0===(a="function"==typeof(o=function(){"use strict";function n(e,n,t){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){s(o.response,n,t)},o.onerror=function(){console.error("could not download file")},o.send()}function o(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch(e){}return 200<=n.status&&299>=n.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t.g&&t.g.global===t.g?t.g:void 0,c=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(e,t,c){var s=r.URL||r.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?a(i):o(i.href)?n(e,t,c):a(i,i.target="_blank")):(i.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(i.href)},4e4),setTimeout(function(){a(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,n){return void 0===n?n={autoBom:!1}:"object"!=typeof n&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),t);else if(o(e))n(e,t,r);else{var c=document.createElement("a");c.href=e,c.target="_blank",setTimeout(function(){a(c)})}}:function(e,t,o,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,o);var s="application/octet-stream"===e.type,i=/constructor/i.test(r.HTMLElement)||r.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||s&&i||c)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},u.readAsDataURL(e)}else{var l=r.URL||r.webkitURL,f=l.createObjectURL(e);a?a.location=f:location.href=f,a=null,setTimeout(function(){l.revokeObjectURL(f)},4e4)}});r.saveAs=s.saveAs=s,e.exports=s})?o.apply(n,[]):o)||(e.exports=a)}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var r=n[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";function e(e,n){localStorage.setItem(e,JSON.stringify(n))}function n(e,n){const t=localStorage.getItem(e);if(!t)return n;try{return JSON.parse(t)}catch(e){return n}}const o="authUser",a="vendors";function r(){return n(a,[])}function c(e){const n=e.toLowerCase().replace(/\s+/g,"");return`V${Math.random().toString(36).substring(2,8)}_${n}`}const s="payments",i="accounts",d=2e5;function u(){return function(){const t=n(i,null);if(!t){const n={A:d,B:d};return e(i,n),n}return t}()}function l(){return n(s,[])}function f(){return l()}var m=t(162);function p(e){return document.getElementById(e)}function g(e){return document.getElementById(e)}function v(e){const n=g("debugBox");if(!n)return;const t=(new Date).toLocaleTimeString();n.textContent=`${t} — ${e}\n`+n.textContent}function h(){const e=p("balancesBox"),n=u();e.innerHTML=`\n        <div class="balance-card">\n        <h4>Account A</h4>\n        <p>$${n.A.toLocaleString()}</p>\n        </div>\n        <div class="balance-card">\n        <h4>Account B</h4>\n        <p>$${n.B.toLocaleString()}</p>\n    </div>\n  `}function y(){const e=p("vendorList"),n=r(),t=p("paymentVendorSelect"),o=p("historyVendorFilter");e.innerHTML="",t.innerHTML='<option value="">-- choose vendor --</option>',o.innerHTML='<option value="">All Vendors</option>',n.forEach(n=>{const a=document.createElement("div");a.className="list-row",a.innerHTML=`\n      <span class="main">${n.name}</span>\n      <span class="sub">ID: ${n.id} • Assigned Account: ${n.assignedAccount}</span>\n    `,e.appendChild(a);const r=document.createElement("option");r.value=n.id,r.textContent=`${n.name} (${n.id})`,t.appendChild(r);const c=document.createElement("option");c.value=n.id,c.textContent=n.name,o.appendChild(c)})}function w(e,n){const t=p(n);e.length?t.innerHTML=e.map(e=>`\n      <div class="list-row">\n        <span class="main">₹${e.amount.toLocaleString()} • Account ${e.account}</span>\n        <span class="sub">Vendor: ${e.vendorName} • ${new Date(e.date).toLocaleString()}</span>\n      </div>\n    `).join(""):t.innerHTML="<p>No payments found.</p>"}function L(){w(f(),"paymentsList")}function b(e){const n=e?function(e){return l().filter(n=>n.vendorId===e)}(e):f();w(n,"vendorHistory")}function A(){p("loginSection").classList.add("hidden"),p("appSection").classList.remove("hidden"),p("logoutBtn").classList.remove("hidden");const e=function(){const e=n(o,null);return e?e.name:null}(),t=g("currentUserLabel");t&&(t.textContent=e?`Logged in as: ${e}`:"")}function E(){p("loginSection").classList.remove("hidden"),p("appSection").classList.add("hidden"),p("logoutBtn").classList.add("hidden");const e=g("currentUserLabel");e&&(e.textContent="")}function x(){n(o,null)?(A(),h(),y(),L(),b(null)):E(),p("loginBtn").addEventListener("click",()=>{const n=p("loginEmail").value.trim(),t=function(n,t){return"admin@company.com"===n&&"admin123"===t&&(e(o,{email:n,name:"Admin"}),!0)}(n,p("loginPassword").value),a=p("loginError");t?(a.textContent="",A(),h(),y(),L(),b(null),v(`Login success for ${n}`)):(a.textContent="Invalid email or password.",v(`Login failed for ${n}`))}),p("logoutBtn").addEventListener("click",()=>{localStorage.removeItem(o),E(),v("User logged out")}),p("addVendorBtn").addEventListener("click",()=>{v(function(n,t){if(!n.trim())return"Vendor name is required.";const o=r();if(o.some(e=>e.name.toLowerCase()===n.toLowerCase()))return"Vendor with this name already exists.";const s={id:c(n),name:n,assignedAccount:t};return o.push(s),function(n){e(a,n)}(o),`Vendor "${n}" added successfully.`}(p("vendorName").value,p("vendorAccount").value)),p("vendorName").value="",y()}),p("makePaymentBtn").addEventListener("click",()=>{const n=p("paymentVendorSelect").value,t=p("paymentAmount").value,o=function(n,t){if(!n)return{ok:!1,message:"Please select a vendor."};if(!t||isNaN(t)||t<=0)return{ok:!1,message:"Please enter a valid amount."};const o=r().find(e=>e.id===n);if(!o)return{ok:!1,message:"Vendor not found."};const a=u(),c=o.assignedAccount;if(t>a[c])return{ok:!1,message:"Insufficient balance in assigned account."};a[c]-=t,e(i,a);const d=l(),f={id:"P"+Date.now().toString(36),vendorId:o.id,vendorName:o.name,amount:t,account:c,date:(new Date).toISOString()};return d.push(f),e(s,d),{ok:!0,message:"Payment recorded successfully."}}(n,Number(t));v(o.message),o.ok&&(p("paymentAmount").value="",h(),L(),b(p("historyVendorFilter").value||null))}),p("historyVendorFilter").addEventListener("change",()=>{b(p("historyVendorFilter").value||null)}),p("downloadReportBtn").addEventListener("click",()=>{(async function(){const e={payments:f(),vendors:r(),accounts:u()},n=function({payments:e,vendors:n,accounts:t}){const o=[];return o.push("Vendor ID,Vendor Name,Amount,Account,Date"),e.forEach(e=>{const t=n.find(n=>n.id===e.vendorId),a=t?t.name:e.vendorName||"Unknown";o.push(`${e.vendorId},${a},${e.amount},${e.account},${e.date}`)}),o.push(""),o.push("Account,Balance"),o.push(`A,${t.A}`),o.push(`B,${t.B}`),o.push(""),o.push(`Report generated at,${(new Date).toISOString()}`),o.join("\n")}(e),t=new Blob([n],{type:"text/csv;charset=utf-8"});if((0,m.saveAs)(t,"BankStatement.csv"),"undefined"!=typeof Excel&&"undefined"!=typeof Office&&Office.context&&Office.context.host)try{await Excel.run(async n=>{const t="Vendor Report";let o;try{o=n.workbook.worksheets.getItem(t)}catch(e){o=n.workbook.worksheets.add(t)}const a=e.payments,r=e.accounts,c=o.getRange("A1:E1");if(c.values=[["Vendor ID","Vendor Name","Amount","Account","Date"]],c.format.font.bold=!0,a.length>0){const e=a.map(e=>[e.vendorId,e.vendorName,e.amount,e.account,new Date(e.date).toLocaleString()]);o.getRangeByIndexes(1,0,e.length,5).values=e}const s=a.length+3,i=o.getRange(`A${s}:B${s}`);i.values=[["Account","Balance"]],i.format.font.bold=!0;const d=[["A",r.A],["B",r.B]];o.getRangeByIndexes(s,0,d.length,2).values=d;const u=s+d.length+2;o.getRange(`A${u}:B${u}`).values=[["Report generated at",(new Date).toLocaleString()]],o.activate(),await n.sync()}),console.log("Excel sheet report generated successfully.")}catch(e){console.error("Excel.run failed, but CSV was still downloaded.",e)}else console.log("Excel.js not available - CSV only mode.")})(),v("Bank statement export triggered.")})}function S(){document.addEventListener("DOMContentLoaded",()=>{console.log("Starting in pure Web mode."),x()})}"undefined"!=typeof Office&&Office.onReady?Office.onReady().then(()=>{console.log("Office.js mode detected - starting in Excel add-in mode."),x()}).catch(()=>{S()}):S()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSw2Q0FDZCxDQUFFLE1BQU85QyxHQUNQL0osUUFBUUMsTUFBTSxrREFBbUQ4SixFQUNuRSxNQXpFRS9KLFFBQVE2TSxJQUFJLDBDQTBFaEIsRURnRklDLEdBQ0F2RyxFQUFTLHFDQUViLENFaE5BLFNBQVN3RyxJQUNQeE0sU0FBU2tKLGlCQUFpQixtQkFBb0IsS0FDNUN6SixRQUFRNk0sSUFBSSw4QkFDWnJELEtBRUosQ0FHc0Isb0JBQVgrQixRQUEwQkEsT0FBT3lCLFFBQzFDekIsT0FBT3lCLFVBQ0pDLEtBQUssS0FDSmpOLFFBQVE2TSxJQUFJLDREQUNackQsTUFFRDBELE1BQU0sS0FDTEgsTUFHSkEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Y2VsLXZlbmRvci1hZGRpbi8uL25vZGVfbW9kdWxlcy9maWxlLXNhdmVyL2Rpc3QvRmlsZVNhdmVyLm1pbi5qcyIsIndlYnBhY2s6Ly9leGNlbC12ZW5kb3ItYWRkaW4vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZXhjZWwtdmVuZG9yLWFkZGluL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vZXhjZWwtdmVuZG9yLWFkZGluLy4vc3JjL3N0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vZXhjZWwtdmVuZG9yLWFkZGluLy4vc3JjL2F1dGgudHMiLCJ3ZWJwYWNrOi8vZXhjZWwtdmVuZG9yLWFkZGluLy4vc3JjL3ZlbmRvcnMudHMiLCJ3ZWJwYWNrOi8vZXhjZWwtdmVuZG9yLWFkZGluLy4vc3JjL3BheW1lbnRzLnRzIiwid2VicGFjazovL2V4Y2VsLXZlbmRvci1hZGRpbi8uL3NyYy91aS50cyIsIndlYnBhY2s6Ly9leGNlbC12ZW5kb3ItYWRkaW4vLi9zcmMvZXhjZWwudHMiLCJ3ZWJwYWNrOi8vZXhjZWwtdmVuZG9yLWFkZGluLy4vc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGEsYil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxiKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBleHBvcnRzKWIoKTtlbHNle2IoKSxhLkZpbGVTYXZlcj17ZXhwb3J0czp7fX0uZXhwb3J0c319KSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihhLGIpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBiP2I9e2F1dG9Cb206ITF9Olwib2JqZWN0XCIhPXR5cGVvZiBiJiYoY29uc29sZS53YXJuKFwiRGVwcmVjYXRlZDogRXhwZWN0ZWQgdGhpcmQgYXJndW1lbnQgdG8gYmUgYSBvYmplY3RcIiksYj17YXV0b0JvbTohYn0pLGIuYXV0b0JvbSYmL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYS50eXBlKT9uZXcgQmxvYihbXCJcXHVGRUZGXCIsYV0se3R5cGU6YS50eXBlfSk6YX1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZD1uZXcgWE1MSHR0cFJlcXVlc3Q7ZC5vcGVuKFwiR0VUXCIsYSksZC5yZXNwb25zZVR5cGU9XCJibG9iXCIsZC5vbmxvYWQ9ZnVuY3Rpb24oKXtnKGQucmVzcG9uc2UsYixjKX0sZC5vbmVycm9yPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcImNvdWxkIG5vdCBkb3dubG9hZCBmaWxlXCIpfSxkLnNlbmQoKX1mdW5jdGlvbiBkKGEpe3ZhciBiPW5ldyBYTUxIdHRwUmVxdWVzdDtiLm9wZW4oXCJIRUFEXCIsYSwhMSk7dHJ5e2Iuc2VuZCgpfWNhdGNoKGEpe31yZXR1cm4gMjAwPD1iLnN0YXR1cyYmMjk5Pj1iLnN0YXR1c31mdW5jdGlvbiBlKGEpe3RyeXthLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiKSl9Y2F0Y2goYyl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtiLmluaXRNb3VzZUV2ZW50KFwiY2xpY2tcIiwhMCwhMCx3aW5kb3csMCwwLDAsODAsMjAsITEsITEsITEsITEsMCxudWxsKSxhLmRpc3BhdGNoRXZlbnQoYil9fXZhciBmPVwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy53aW5kb3c9PT13aW5kb3c/d2luZG93Olwib2JqZWN0XCI9PXR5cGVvZiBzZWxmJiZzZWxmLnNlbGY9PT1zZWxmP3NlbGY6XCJvYmplY3RcIj09dHlwZW9mIGdsb2JhbCYmZ2xvYmFsLmdsb2JhbD09PWdsb2JhbD9nbG9iYWw6dm9pZCAwLGE9Zi5uYXZpZ2F0b3ImJi9NYWNpbnRvc2gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJi9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmIS9TYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksZz1mLnNhdmVBc3x8KFwib2JqZWN0XCIhPXR5cGVvZiB3aW5kb3d8fHdpbmRvdyE9PWY/ZnVuY3Rpb24oKXt9OlwiZG93bmxvYWRcImluIEhUTUxBbmNob3JFbGVtZW50LnByb3RvdHlwZSYmIWE/ZnVuY3Rpb24oYixnLGgpe3ZhciBpPWYuVVJMfHxmLndlYmtpdFVSTCxqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO2c9Z3x8Yi5uYW1lfHxcImRvd25sb2FkXCIsai5kb3dubG9hZD1nLGoucmVsPVwibm9vcGVuZXJcIixcInN0cmluZ1wiPT10eXBlb2YgYj8oai5ocmVmPWIsai5vcmlnaW49PT1sb2NhdGlvbi5vcmlnaW4/ZShqKTpkKGouaHJlZik/YyhiLGcsaCk6ZShqLGoudGFyZ2V0PVwiX2JsYW5rXCIpKTooai5ocmVmPWkuY3JlYXRlT2JqZWN0VVJMKGIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLnJldm9rZU9iamVjdFVSTChqLmhyZWYpfSw0RTQpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKGopfSwwKSl9OlwibXNTYXZlT3JPcGVuQmxvYlwiaW4gbmF2aWdhdG9yP2Z1bmN0aW9uKGYsZyxoKXtpZihnPWd8fGYubmFtZXx8XCJkb3dubG9hZFwiLFwic3RyaW5nXCIhPXR5cGVvZiBmKW5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGIoZixoKSxnKTtlbHNlIGlmKGQoZikpYyhmLGcsaCk7ZWxzZXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtpLmhyZWY9ZixpLnRhcmdldD1cIl9ibGFua1wiLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKGkpfSl9fTpmdW5jdGlvbihiLGQsZSxnKXtpZihnPWd8fG9wZW4oXCJcIixcIl9ibGFua1wiKSxnJiYoZy5kb2N1bWVudC50aXRsZT1nLmRvY3VtZW50LmJvZHkuaW5uZXJUZXh0PVwiZG93bmxvYWRpbmcuLi5cIiksXCJzdHJpbmdcIj09dHlwZW9mIGIpcmV0dXJuIGMoYixkLGUpO3ZhciBoPVwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI9PT1iLnR5cGUsaT0vY29uc3RydWN0b3IvaS50ZXN0KGYuSFRNTEVsZW1lbnQpfHxmLnNhZmFyaSxqPS9DcmlPU1xcL1tcXGRdKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtpZigoanx8aCYmaXx8YSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBGaWxlUmVhZGVyKXt2YXIgaz1uZXcgRmlsZVJlYWRlcjtrLm9ubG9hZGVuZD1mdW5jdGlvbigpe3ZhciBhPWsucmVzdWx0O2E9aj9hOmEucmVwbGFjZSgvXmRhdGE6W147XSo7LyxcImRhdGE6YXR0YWNobWVudC9maWxlO1wiKSxnP2cubG9jYXRpb24uaHJlZj1hOmxvY2F0aW9uPWEsZz1udWxsfSxrLnJlYWRBc0RhdGFVUkwoYil9ZWxzZXt2YXIgbD1mLlVSTHx8Zi53ZWJraXRVUkwsbT1sLmNyZWF0ZU9iamVjdFVSTChiKTtnP2cubG9jYXRpb249bTpsb2NhdGlvbi5ocmVmPW0sZz1udWxsLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtsLnJldm9rZU9iamVjdFVSTChtKX0sNEU0KX19KTtmLnNhdmVBcz1nLnNhdmVBcz1nLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJihtb2R1bGUuZXhwb3J0cz1nKX0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1GaWxlU2F2ZXIubWluLmpzLm1hcCIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsImV4cG9ydCBmdW5jdGlvbiBzYXZlPFQ+KGtleTogc3RyaW5nLCB2YWx1ZTogVCk6IHZvaWQge1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxvYWQ8VD4oa2V5OiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogVCk6IFQge1xyXG4gIGNvbnN0IHJhdyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgaWYgKCFyYXcpIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHJhdykgYXMgVDtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGxvYWQsIHNhdmUgfSBmcm9tIFwiLi9zdG9yYWdlXCI7XHJcblxyXG5jb25zdCBBVVRIX0tFWSA9IFwiYXV0aFVzZXJcIjtcclxuXHJcbmludGVyZmFjZSBBdXRoVXNlciB7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2dpbihlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgdmFsaWRFbWFpbCA9IFwiYWRtaW5AY29tcGFueS5jb21cIjtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gXCJhZG1pbjEyM1wiO1xyXG5cclxuICBpZiAoZW1haWwgPT09IHZhbGlkRW1haWwgJiYgcGFzc3dvcmQgPT09IHZhbGlkUGFzc3dvcmQpIHtcclxuICAgIGNvbnN0IHVzZXI6IEF1dGhVc2VyID0ge1xyXG4gICAgICBlbWFpbCxcclxuICAgICAgbmFtZTogXCJBZG1pblwiXHJcbiAgICB9O1xyXG4gICAgc2F2ZTxBdXRoVXNlciB8IG51bGw+KEFVVEhfS0VZLCB1c2VyKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2dvdXQoKTogdm9pZCB7XHJcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oQVVUSF9LRVkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNMb2dnZWRJbigpOiBib29sZWFuIHtcclxuICBjb25zdCB1c2VyID0gbG9hZDxBdXRoVXNlciB8IG51bGw+KEFVVEhfS0VZLCBudWxsKTtcclxuICByZXR1cm4gISF1c2VyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXJOYW1lKCk6IHN0cmluZyB8IG51bGwge1xyXG4gIGNvbnN0IHVzZXIgPSBsb2FkPEF1dGhVc2VyIHwgbnVsbD4oQVVUSF9LRVksIG51bGwpO1xyXG4gIHJldHVybiB1c2VyID8gdXNlci5uYW1lIDogbnVsbDtcclxufVxyXG4iLCJpbXBvcnQgeyBWZW5kb3IsIEFjY291bnRDb2RlIH0gZnJvbSBcIi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgbG9hZCwgc2F2ZSB9IGZyb20gXCIuL3N0b3JhZ2VcIjtcclxuXHJcbmNvbnN0IFZFTkRPUl9LRVkgPSBcInZlbmRvcnNcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRWZW5kb3JzKCk6IFZlbmRvcltdIHtcclxuICByZXR1cm4gbG9hZDxWZW5kb3JbXT4oVkVORE9SX0tFWSwgW10pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwZXJzaXN0VmVuZG9ycyh2ZW5kb3JzOiBWZW5kb3JbXSk6IHZvaWQge1xyXG4gIHNhdmU8VmVuZG9yW10+KFZFTkRPUl9LRVksIHZlbmRvcnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVWZW5kb3JJZChuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGNvbnN0IGJhc2UgPSBuYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCBcIlwiKTtcclxuICByZXR1cm4gYFYke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KX1fJHtiYXNlfWA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRWZW5kb3IobmFtZTogc3RyaW5nLCBhc3NpZ25lZEFjY291bnQ6IEFjY291bnRDb2RlKTogc3RyaW5nIHtcclxuICBpZiAoIW5hbWUudHJpbSgpKSB7XHJcbiAgICByZXR1cm4gXCJWZW5kb3IgbmFtZSBpcyByZXF1aXJlZC5cIjtcclxuICB9XHJcblxyXG4gIGNvbnN0IHZlbmRvcnMgPSBnZXRWZW5kb3JzKCk7XHJcblxyXG4gIGlmICh2ZW5kb3JzLnNvbWUodiA9PiB2Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpKSkge1xyXG4gICAgcmV0dXJuIFwiVmVuZG9yIHdpdGggdGhpcyBuYW1lIGFscmVhZHkgZXhpc3RzLlwiO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbmV3VmVuZG9yOiBWZW5kb3IgPSB7XHJcbiAgICBpZDogY3JlYXRlVmVuZG9ySWQobmFtZSksXHJcbiAgICBuYW1lLFxyXG4gICAgYXNzaWduZWRBY2NvdW50XHJcbiAgfTtcclxuXHJcbiAgdmVuZG9ycy5wdXNoKG5ld1ZlbmRvcik7XHJcbiAgcGVyc2lzdFZlbmRvcnModmVuZG9ycyk7XHJcblxyXG4gIHJldHVybiBgVmVuZG9yIFwiJHtuYW1lfVwiIGFkZGVkIHN1Y2Nlc3NmdWxseS5gO1xyXG59XHJcbiIsImltcG9ydCB7IFBheW1lbnQsIEFjY291bnRzLCBBY2NvdW50Q29kZSB9IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCB7IGxvYWQsIHNhdmUgfSBmcm9tIFwiLi9zdG9yYWdlXCI7XHJcbmltcG9ydCB7IGdldFZlbmRvcnMgfSBmcm9tIFwiLi92ZW5kb3JzXCI7XHJcblxyXG5jb25zdCBQQVlfS0VZID0gXCJwYXltZW50c1wiO1xyXG5jb25zdCBBQ0NfS0VZID0gXCJhY2NvdW50c1wiO1xyXG5cclxuY29uc3QgSU5JVElBTF9CQUxBTkNFID0gMjAwMDAwOyBcclxuXHJcbmZ1bmN0aW9uIGVuc3VyZUFjY291bnRzKCk6IEFjY291bnRzIHtcclxuICBjb25zdCBzdG9yZWQgPSBsb2FkPEFjY291bnRzIHwgbnVsbD4oQUNDX0tFWSwgbnVsbCk7XHJcbiAgaWYgKCFzdG9yZWQpIHtcclxuICAgIGNvbnN0IGZyZXNoOiBBY2NvdW50cyA9IHsgQTogSU5JVElBTF9CQUxBTkNFLCBCOiBJTklUSUFMX0JBTEFOQ0UgfTtcclxuICAgIHNhdmU8QWNjb3VudHM+KEFDQ19LRVksIGZyZXNoKTtcclxuICAgIHJldHVybiBmcmVzaDtcclxuICB9XHJcbiAgcmV0dXJuIHN0b3JlZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFjY291bnRzU3RhdGUoKTogQWNjb3VudHMge1xyXG4gIHJldHVybiBlbnN1cmVBY2NvdW50cygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwZXJzaXN0QWNjb3VudHMoYWNjOiBBY2NvdW50cyk6IHZvaWQge1xyXG4gIHNhdmU8QWNjb3VudHM+KEFDQ19LRVksIGFjYyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBheW1lbnRzUmF3KCk6IFBheW1lbnRbXSB7XHJcbiAgcmV0dXJuIGxvYWQ8UGF5bWVudFtdPihQQVlfS0VZLCBbXSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBlcnNpc3RQYXltZW50cyhwOiBQYXltZW50W10pOiB2b2lkIHtcclxuICBzYXZlPFBheW1lbnRbXT4oUEFZX0tFWSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxQYXltZW50cygpOiBQYXltZW50W10ge1xyXG4gIHJldHVybiBnZXRQYXltZW50c1JhdygpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGF5bWVudHNCeVZlbmRvcih2ZW5kb3JJZDogc3RyaW5nKTogUGF5bWVudFtdIHtcclxuICByZXR1cm4gZ2V0UGF5bWVudHNSYXcoKS5maWx0ZXIocCA9PiBwLnZlbmRvcklkID09PSB2ZW5kb3JJZCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGF5bWVudChcclxuICB2ZW5kb3JJZDogc3RyaW5nLFxyXG4gIGFtb3VudDogbnVtYmVyXHJcbik6IHsgb2s6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9IHtcclxuICBpZiAoIXZlbmRvcklkKSB7XHJcbiAgICByZXR1cm4geyBvazogZmFsc2UsIG1lc3NhZ2U6IFwiUGxlYXNlIHNlbGVjdCBhIHZlbmRvci5cIiB9O1xyXG4gIH1cclxuICBpZiAoIWFtb3VudCB8fCBpc05hTihhbW91bnQpIHx8IGFtb3VudCA8PSAwKSB7XHJcbiAgICByZXR1cm4geyBvazogZmFsc2UsIG1lc3NhZ2U6IFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgYW1vdW50LlwiIH07XHJcbiAgfVxyXG5cclxuICBjb25zdCB2ZW5kb3JzID0gZ2V0VmVuZG9ycygpO1xyXG4gIGNvbnN0IHZlbmRvciA9IHZlbmRvcnMuZmluZCh2ID0+IHYuaWQgPT09IHZlbmRvcklkKTtcclxuICBpZiAoIXZlbmRvcikge1xyXG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIlZlbmRvciBub3QgZm91bmQuXCIgfTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGFjY291bnRzID0gZ2V0QWNjb3VudHNTdGF0ZSgpO1xyXG4gIGNvbnN0IGFjY291bnRDb2RlID0gdmVuZG9yLmFzc2lnbmVkQWNjb3VudDtcclxuXHJcbiAgaWYgKGFtb3VudCA+IGFjY291bnRzW2FjY291bnRDb2RlXSkge1xyXG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIkluc3VmZmljaWVudCBiYWxhbmNlIGluIGFzc2lnbmVkIGFjY291bnQuXCIgfTtcclxuICB9XHJcblxyXG4gIC8vIERlZHVjdFxyXG4gIGFjY291bnRzW2FjY291bnRDb2RlXSAtPSBhbW91bnQ7XHJcbiAgcGVyc2lzdEFjY291bnRzKGFjY291bnRzKTtcclxuXHJcbiAgLy8gUmVjb3JkIHBheW1lbnRcclxuICBjb25zdCBwYXltZW50cyA9IGdldFBheW1lbnRzUmF3KCk7XHJcbiAgY29uc3QgcGF5bWVudDogUGF5bWVudCA9IHtcclxuICAgIGlkOiBcIlBcIiArIERhdGUubm93KCkudG9TdHJpbmcoMzYpLFxyXG4gICAgdmVuZG9ySWQ6IHZlbmRvci5pZCxcclxuICAgIHZlbmRvck5hbWU6IHZlbmRvci5uYW1lLFxyXG4gICAgYW1vdW50LFxyXG4gICAgYWNjb3VudDogYWNjb3VudENvZGUsXHJcbiAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICB9O1xyXG5cclxuICBwYXltZW50cy5wdXNoKHBheW1lbnQpO1xyXG4gIHBlcnNpc3RQYXltZW50cyhwYXltZW50cyk7XHJcblxyXG4gIHJldHVybiB7IG9rOiB0cnVlLCBtZXNzYWdlOiBcIlBheW1lbnQgcmVjb3JkZWQgc3VjY2Vzc2Z1bGx5LlwiIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgbG9naW4sIGlzTG9nZ2VkSW4sIGxvZ291dCwgZ2V0Q3VycmVudFVzZXJOYW1lIH0gZnJvbSBcIi4vYXV0aFwiO1xyXG5pbXBvcnQgeyBhZGRWZW5kb3IsIGdldFZlbmRvcnMgfSBmcm9tIFwiLi92ZW5kb3JzXCI7XHJcbmltcG9ydCB7XHJcbiAgbWFrZVBheW1lbnQsXHJcbiAgZ2V0QWxsUGF5bWVudHMsXHJcbiAgZ2V0UGF5bWVudHNCeVZlbmRvcixcclxuICBnZXRBY2NvdW50c1N0YXRlXHJcbn0gZnJvbSBcIi4vcGF5bWVudHNcIjtcclxuaW1wb3J0IHsgZG93bmxvYWRCYW5rU3RhdGVtZW50Q3N2IH0gZnJvbSBcIi4vZXhjZWxcIjtcclxuaW1wb3J0IHR5cGUgeyBWZW5kb3IsIFBheW1lbnQgfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5cclxuZnVuY3Rpb24gZWwoaWQ6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcclxuICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpITtcclxufVxyXG5cclxuZnVuY3Rpb24gb3B0RWwoaWQ6IHN0cmluZyk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XHJcbiAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxufVxyXG5cclxuLy8gZGVidWcgbG9nIFxyXG5mdW5jdGlvbiBsb2dEZWJ1ZyhtZXNzYWdlOiBzdHJpbmcpIHtcclxuICBjb25zdCBib3ggPSBvcHRFbChcImRlYnVnQm94XCIpO1xyXG4gIGlmICghYm94KSByZXR1cm47XHJcbiAgY29uc3QgdGltZSA9IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7XHJcbiAgYm94LnRleHRDb250ZW50ID0gYCR7dGltZX0g4oCUICR7bWVzc2FnZX1cXG5gICsgYm94LnRleHRDb250ZW50O1xyXG59XHJcblxyXG4vLyByZW5kZXIgYmFsYW5jZSBcclxuZnVuY3Rpb24gcmVuZGVyQmFsYW5jZXMoKSB7XHJcbiAgY29uc3QgYm94ID0gZWwoXCJiYWxhbmNlc0JveFwiKTtcclxuICBjb25zdCBhY2MgPSBnZXRBY2NvdW50c1N0YXRlKCk7XHJcbiAgICBib3guaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJiYWxhbmNlLWNhcmRcIj5cclxuICAgICAgICA8aDQ+QWNjb3VudCBBPC9oND5cclxuICAgICAgICA8cD4kJHthY2MuQS50b0xvY2FsZVN0cmluZygpfTwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiYmFsYW5jZS1jYXJkXCI+XHJcbiAgICAgICAgPGg0PkFjY291bnQgQjwvaDQ+XHJcbiAgICAgICAgPHA+JCR7YWNjLkIudG9Mb2NhbGVTdHJpbmcoKX08L3A+XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG59XHJcblxyXG4vLyByZW5kZXIgdmVuZG9yc1xyXG5mdW5jdGlvbiByZW5kZXJWZW5kb3JzKCkge1xyXG4gIGNvbnN0IGxpc3QgPSBlbChcInZlbmRvckxpc3RcIik7XHJcbiAgY29uc3QgdmVuZG9ycyA9IGdldFZlbmRvcnMoKTtcclxuXHJcbiAgY29uc3QgcGF5U2VsZWN0ID0gZWwoXCJwYXltZW50VmVuZG9yU2VsZWN0XCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gIGNvbnN0IGhpc3RvcnlTZWxlY3QgPSBlbChcImhpc3RvcnlWZW5kb3JGaWx0ZXJcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcblxyXG4gIGxpc3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICBwYXlTZWxlY3QuaW5uZXJIVE1MID0gYDxvcHRpb24gdmFsdWU9XCJcIj4tLSBjaG9vc2UgdmVuZG9yIC0tPC9vcHRpb24+YDtcclxuICBoaXN0b3J5U2VsZWN0LmlubmVySFRNTCA9IGA8b3B0aW9uIHZhbHVlPVwiXCI+QWxsIFZlbmRvcnM8L29wdGlvbj5gO1xyXG5cclxuICB2ZW5kb3JzLmZvckVhY2goKHY6IFZlbmRvcikgPT4ge1xyXG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHJvdy5jbGFzc05hbWUgPSBcImxpc3Qtcm93XCI7XHJcbiAgICByb3cuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8c3BhbiBjbGFzcz1cIm1haW5cIj4ke3YubmFtZX08L3NwYW4+XHJcbiAgICAgIDxzcGFuIGNsYXNzPVwic3ViXCI+SUQ6ICR7di5pZH0g4oCiIEFzc2lnbmVkIEFjY291bnQ6ICR7di5hc3NpZ25lZEFjY291bnR9PC9zcGFuPlxyXG4gICAgYDtcclxuICAgIGxpc3QuYXBwZW5kQ2hpbGQocm93KTtcclxuXHJcbiAgICBjb25zdCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgb3B0LnZhbHVlID0gdi5pZDtcclxuICAgIG9wdC50ZXh0Q29udGVudCA9IGAke3YubmFtZX0gKCR7di5pZH0pYDtcclxuICAgIHBheVNlbGVjdC5hcHBlbmRDaGlsZChvcHQpO1xyXG5cclxuICAgIGNvbnN0IG9wdDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgb3B0Mi52YWx1ZSA9IHYuaWQ7XHJcbiAgICBvcHQyLnRleHRDb250ZW50ID0gdi5uYW1lO1xyXG4gICAgaGlzdG9yeVNlbGVjdC5hcHBlbmRDaGlsZChvcHQyKTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gcmVuZG9yIHBheW1lbnRzXHJcbmZ1bmN0aW9uIHJlbmRlclBheW1lbnRzKHBheW1lbnRzOiBQYXltZW50W10sIGNvbnRhaW5lcklkOiBzdHJpbmcpIHtcclxuICBjb25zdCBsaXN0ID0gZWwoY29udGFpbmVySWQpO1xyXG5cclxuICBpZiAoIXBheW1lbnRzLmxlbmd0aCkge1xyXG4gICAgbGlzdC5pbm5lckhUTUwgPSBcIjxwPk5vIHBheW1lbnRzIGZvdW5kLjwvcD5cIjtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGxpc3QuaW5uZXJIVE1MID0gcGF5bWVudHNcclxuICAgIC5tYXAoXHJcbiAgICAgIHAgPT4gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwibGlzdC1yb3dcIj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cIm1haW5cIj7igrkke3AuYW1vdW50LnRvTG9jYWxlU3RyaW5nKCl9IOKAoiBBY2NvdW50ICR7cC5hY2NvdW50fTwvc3Bhbj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cInN1YlwiPlZlbmRvcjogJHtwLnZlbmRvck5hbWV9IOKAoiAke25ldyBEYXRlKFxyXG4gICAgICAgIHAuZGF0ZVxyXG4gICAgICApLnRvTG9jYWxlU3RyaW5nKCl9PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGBcclxuICAgIClcclxuICAgIC5qb2luKFwiXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJBbGxQYXltZW50cygpIHtcclxuICByZW5kZXJQYXltZW50cyhnZXRBbGxQYXltZW50cygpLCBcInBheW1lbnRzTGlzdFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyVmVuZG9ySGlzdG9yeSh2ZW5kb3JJZDogc3RyaW5nIHwgbnVsbCkge1xyXG4gIGNvbnN0IGRhdGEgPSB2ZW5kb3JJZCA/IGdldFBheW1lbnRzQnlWZW5kb3IodmVuZG9ySWQpIDogZ2V0QWxsUGF5bWVudHMoKTtcclxuICByZW5kZXJQYXltZW50cyhkYXRhLCBcInZlbmRvckhpc3RvcnlcIik7XHJcbn1cclxuXHJcbi8vIGF1dGggdWkgXHJcbmZ1bmN0aW9uIHNob3dBcHAoKSB7XHJcbiAgZWwoXCJsb2dpblNlY3Rpb25cIikuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICBlbChcImFwcFNlY3Rpb25cIikuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuICBlbChcImxvZ291dEJ0blwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG5cclxuICBjb25zdCBuYW1lID0gZ2V0Q3VycmVudFVzZXJOYW1lKCk7XHJcbiAgY29uc3QgbGJsID0gb3B0RWwoXCJjdXJyZW50VXNlckxhYmVsXCIpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxuICBpZiAobGJsKSB7XHJcbiAgICBsYmwudGV4dENvbnRlbnQgPSBuYW1lID8gYExvZ2dlZCBpbiBhczogJHtuYW1lfWAgOiBcIlwiO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0xvZ2luKCkge1xyXG4gIGVsKFwibG9naW5TZWN0aW9uXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgZWwoXCJhcHBTZWN0aW9uXCIpLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgZWwoXCJsb2dvdXRCdG5cIikuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuXHJcbiAgY29uc3QgbGJsID0gb3B0RWwoXCJjdXJyZW50VXNlckxhYmVsXCIpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxuICBpZiAobGJsKSBsYmwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG59XHJcblxyXG4vLyBpbml0aWFsaXplIHVpXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplVUkoKSB7XHJcbiAgaWYgKGlzTG9nZ2VkSW4oKSkge1xyXG4gICAgc2hvd0FwcCgpO1xyXG4gICAgcmVuZGVyQmFsYW5jZXMoKTtcclxuICAgIHJlbmRlclZlbmRvcnMoKTtcclxuICAgIHJlbmRlckFsbFBheW1lbnRzKCk7XHJcbiAgICByZW5kZXJWZW5kb3JIaXN0b3J5KG51bGwpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzaG93TG9naW4oKTtcclxuICB9XHJcblxyXG4gIC8vIGxvZ2luXHJcbiAgZWwoXCJsb2dpbkJ0blwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgY29uc3QgZW1haWwgPSAoZWwoXCJsb2dpbkVtYWlsXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLnRyaW0oKTtcclxuICAgIGNvbnN0IHBhc3N3b3JkID0gKGVsKFwibG9naW5QYXNzd29yZFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgIGNvbnN0IG9rID0gbG9naW4oZW1haWwsIHBhc3N3b3JkKTtcclxuXHJcbiAgICBjb25zdCBlcnIgPSBlbChcImxvZ2luRXJyb3JcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcblxyXG4gICAgaWYgKG9rKSB7XHJcbiAgICAgIGVyci50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgIHNob3dBcHAoKTtcclxuICAgICAgcmVuZGVyQmFsYW5jZXMoKTtcclxuICAgICAgcmVuZGVyVmVuZG9ycygpO1xyXG4gICAgICByZW5kZXJBbGxQYXltZW50cygpO1xyXG4gICAgICByZW5kZXJWZW5kb3JIaXN0b3J5KG51bGwpO1xyXG4gICAgICBsb2dEZWJ1ZyhgTG9naW4gc3VjY2VzcyBmb3IgJHtlbWFpbH1gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVyci50ZXh0Q29udGVudCA9IFwiSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZC5cIjtcclxuICAgICAgbG9nRGVidWcoYExvZ2luIGZhaWxlZCBmb3IgJHtlbWFpbH1gKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gbG9nb3V0XHJcbiAgZWwoXCJsb2dvdXRCdG5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGxvZ291dCgpO1xyXG4gICAgc2hvd0xvZ2luKCk7XHJcbiAgICBsb2dEZWJ1ZyhcIlVzZXIgbG9nZ2VkIG91dFwiKTtcclxuICB9KTtcclxuXHJcbiAgLy8gYWRkIHZlbmRvclxyXG4gIGVsKFwiYWRkVmVuZG9yQnRuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjb25zdCBuYW1lID0gKGVsKFwidmVuZG9yTmFtZVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgIGNvbnN0IGFjY291bnQgPSAoZWwoXCJ2ZW5kb3JBY2NvdW50XCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZSBhcyBcIkFcIiB8IFwiQlwiO1xyXG5cclxuICAgIGNvbnN0IG1zZyA9IGFkZFZlbmRvcihuYW1lLCBhY2NvdW50KTtcclxuICAgIGxvZ0RlYnVnKG1zZyk7XHJcblxyXG4gICAgKGVsKFwidmVuZG9yTmFtZVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IFwiXCI7XHJcbiAgICByZW5kZXJWZW5kb3JzKCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIG1ha2UgcGF5bWVudFxyXG4gIGVsKFwibWFrZVBheW1lbnRCdG5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGNvbnN0IHZlbmRvcklkID0gKGVsKFwicGF5bWVudFZlbmRvclNlbGVjdFwiKSBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWU7XHJcbiAgICBjb25zdCBhbW91bnRTdHIgPSAoZWwoXCJwYXltZW50QW1vdW50XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgY29uc3QgYW1vdW50ID0gTnVtYmVyKGFtb3VudFN0cik7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gbWFrZVBheW1lbnQodmVuZG9ySWQsIGFtb3VudCk7XHJcbiAgICBsb2dEZWJ1ZyhyZXN1bHQubWVzc2FnZSk7XHJcblxyXG4gICAgaWYgKHJlc3VsdC5vaykge1xyXG4gICAgICAoZWwoXCJwYXltZW50QW1vdW50XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gXCJcIjtcclxuICAgICAgcmVuZGVyQmFsYW5jZXMoKTtcclxuICAgICAgcmVuZGVyQWxsUGF5bWVudHMoKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbHRlclZhbCA9IChlbChcImhpc3RvcnlWZW5kb3JGaWx0ZXJcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlIHx8IG51bGw7XHJcbiAgICAgIHJlbmRlclZlbmRvckhpc3RvcnkoZmlsdGVyVmFsKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gdmVuZG9yIGhpc3RvcnkgZmlsdGVyXHJcbiAgZWwoXCJoaXN0b3J5VmVuZG9yRmlsdGVyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgY29uc3QgdmVuZG9ySWQgPSAoZWwoXCJoaXN0b3J5VmVuZG9yRmlsdGVyXCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZSB8fCBudWxsO1xyXG4gICAgcmVuZGVyVmVuZG9ySGlzdG9yeSh2ZW5kb3JJZCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIGNzdiArIGV4Y2VsIGV4cG9ydFxyXG4gIGVsKFwiZG93bmxvYWRSZXBvcnRCdG5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGRvd25sb2FkQmFua1N0YXRlbWVudENzdigpO1xyXG4gICAgbG9nRGVidWcoXCJCYW5rIHN0YXRlbWVudCBleHBvcnQgdHJpZ2dlcmVkLlwiKTtcclxuICB9KTtcclxufVxyXG4iLCJpbXBvcnQgeyBzYXZlQXMgfSBmcm9tIFwiZmlsZS1zYXZlclwiO1xyXG5pbXBvcnQgeyBnZXRBbGxQYXltZW50cywgZ2V0QWNjb3VudHNTdGF0ZSB9IGZyb20gXCIuL3BheW1lbnRzXCI7XHJcbmltcG9ydCB7IGdldFZlbmRvcnMgfSBmcm9tIFwiLi92ZW5kb3JzXCI7XHJcbmltcG9ydCB0eXBlIHsgUGF5bWVudCwgVmVuZG9yLCBBY2NvdW50cyB9IGZyb20gXCIuL3R5cGVzXCI7XHJcblxyXG4vLyBkZWNsYXJlIGdsb2JhbHMgc28gVFMgZG9lc24ndCBjb21wbGFpbiBpZiB3ZSBkb24ndCBoYXZlIEB0eXBlcy9vZmZpY2UtanNcclxuZGVjbGFyZSBjb25zdCBFeGNlbDogYW55O1xyXG5kZWNsYXJlIGNvbnN0IE9mZmljZTogYW55O1xyXG5cclxuZnVuY3Rpb24gYnVpbGRSZXBvcnREYXRhKCkge1xyXG4gIGNvbnN0IHBheW1lbnRzOiBQYXltZW50W10gPSBnZXRBbGxQYXltZW50cygpO1xyXG4gIGNvbnN0IHZlbmRvcnM6IFZlbmRvcltdID0gZ2V0VmVuZG9ycygpO1xyXG4gIGNvbnN0IGFjY291bnRzOiBBY2NvdW50cyA9IGdldEFjY291bnRzU3RhdGUoKTtcclxuXHJcbiAgcmV0dXJuIHsgcGF5bWVudHMsIHZlbmRvcnMsIGFjY291bnRzIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkQ3N2KHsgcGF5bWVudHMsIHZlbmRvcnMsIGFjY291bnRzIH06IFJldHVyblR5cGU8dHlwZW9mIGJ1aWxkUmVwb3J0RGF0YT4pOiBzdHJpbmcge1xyXG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGxpbmVzLnB1c2goXCJWZW5kb3IgSUQsVmVuZG9yIE5hbWUsQW1vdW50LEFjY291bnQsRGF0ZVwiKTtcclxuXHJcbiAgcGF5bWVudHMuZm9yRWFjaChwID0+IHtcclxuICAgIGNvbnN0IHYgPSB2ZW5kb3JzLmZpbmQodiA9PiB2LmlkID09PSBwLnZlbmRvcklkKTtcclxuICAgIGNvbnN0IG5hbWUgPSB2ID8gdi5uYW1lIDogcC52ZW5kb3JOYW1lIHx8IFwiVW5rbm93blwiO1xyXG4gICAgbGluZXMucHVzaChcclxuICAgICAgYCR7cC52ZW5kb3JJZH0sJHtuYW1lfSwke3AuYW1vdW50fSwke3AuYWNjb3VudH0sJHtwLmRhdGV9YFxyXG4gICAgKTtcclxuICB9KTtcclxuXHJcbiAgbGluZXMucHVzaChcIlwiKTtcclxuICBsaW5lcy5wdXNoKFwiQWNjb3VudCxCYWxhbmNlXCIpO1xyXG4gIGxpbmVzLnB1c2goYEEsJHthY2NvdW50cy5BfWApO1xyXG4gIGxpbmVzLnB1c2goYEIsJHthY2NvdW50cy5CfWApO1xyXG4gIGxpbmVzLnB1c2goXCJcIik7XHJcbiAgbGluZXMucHVzaChgUmVwb3J0IGdlbmVyYXRlZCBhdCwke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1gKTtcclxuXHJcbiAgcmV0dXJuIGxpbmVzLmpvaW4oXCJcXG5cIik7XHJcbn1cclxuXHJcbi8vIGRvd25sb2FkIGNzdiArIGV4Y2VsIHJlcG9ydFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZG93bmxvYWRCYW5rU3RhdGVtZW50Q3N2KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IGRhdGEgPSBidWlsZFJlcG9ydERhdGEoKTtcclxuICBjb25zdCBjc3YgPSBidWlsZENzdihkYXRhKTtcclxuXHJcbiAgLy8gQWx3YXlzOiBDU1YgZG93bmxvYWQgKHdvcmtzIGluIGJyb3dzZXIgJiBFeGNlbCB0YXNrcGFuZSlcclxuICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2Nzdl0sIHsgdHlwZTogXCJ0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04XCIgfSk7XHJcbiAgc2F2ZUFzKGJsb2IsIFwiQmFua1N0YXRlbWVudC5jc3ZcIik7XHJcblxyXG4gIC8vIFRyeSBFeGNlbCBhdXRvbWF0aW9uIGlmIGF2YWlsYWJsZVxyXG4gIGNvbnN0IGhhc0V4Y2VsID1cclxuICAgIHR5cGVvZiBFeGNlbCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxyXG4gICAgdHlwZW9mIE9mZmljZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxyXG4gICAgT2ZmaWNlLmNvbnRleHQgJiZcclxuICAgIE9mZmljZS5jb250ZXh0Lmhvc3Q7XHJcblxyXG4gIGlmICghaGFzRXhjZWwpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiRXhjZWwuanMgbm90IGF2YWlsYWJsZSAtIENTViBvbmx5IG1vZGUuXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IEV4Y2VsLnJ1bihhc3luYyAoY29udGV4dDogYW55KSA9PiB7XHJcbiAgICAgIGNvbnN0IHNoZWV0TmFtZSA9IFwiVmVuZG9yIFJlcG9ydFwiO1xyXG4gICAgICBsZXQgc2hlZXQ7XHJcblxyXG4gICAgICAvLyBUcnkgdG8gZ2V0IG9yIGFkZCB3b3Jrc2hlZXRcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBzaGVldCA9IGNvbnRleHQud29ya2Jvb2sud29ya3NoZWV0cy5nZXRJdGVtKHNoZWV0TmFtZSk7XHJcbiAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIHNoZWV0ID0gY29udGV4dC53b3JrYm9vay53b3Jrc2hlZXRzLmFkZChzaGVldE5hbWUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBwYXltZW50cyA9IGRhdGEucGF5bWVudHM7XHJcbiAgICAgIGNvbnN0IGFjY291bnRzID0gZGF0YS5hY2NvdW50cztcclxuXHJcbiAgICAgIC8vIEhlYWRlclxyXG4gICAgICBjb25zdCBoZWFkZXJSYW5nZSA9IHNoZWV0LmdldFJhbmdlKFwiQTE6RTFcIik7XHJcbiAgICAgIGhlYWRlclJhbmdlLnZhbHVlcyA9IFtbXCJWZW5kb3IgSURcIiwgXCJWZW5kb3IgTmFtZVwiLCBcIkFtb3VudFwiLCBcIkFjY291bnRcIiwgXCJEYXRlXCJdXTtcclxuICAgICAgaGVhZGVyUmFuZ2UuZm9ybWF0LmZvbnQuYm9sZCA9IHRydWU7XHJcblxyXG4gICAgICBpZiAocGF5bWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGJvZHlWYWx1ZXMgPSBwYXltZW50cy5tYXAocCA9PiBbXHJcbiAgICAgICAgICBwLnZlbmRvcklkLFxyXG4gICAgICAgICAgcC52ZW5kb3JOYW1lLFxyXG4gICAgICAgICAgcC5hbW91bnQsXHJcbiAgICAgICAgICBwLmFjY291bnQsXHJcbiAgICAgICAgICBuZXcgRGF0ZShwLmRhdGUpLnRvTG9jYWxlU3RyaW5nKClcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgY29uc3QgYm9keVJhbmdlID0gc2hlZXQuZ2V0UmFuZ2VCeUluZGV4ZXMoXHJcbiAgICAgICAgICAxLFxyXG4gICAgICAgICAgMCxcclxuICAgICAgICAgIGJvZHlWYWx1ZXMubGVuZ3RoLFxyXG4gICAgICAgICAgNVxyXG4gICAgICAgICk7IFxyXG4gICAgICAgIGJvZHlSYW5nZS52YWx1ZXMgPSBib2R5VmFsdWVzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBBY2NvdW50cyBzdW1tYXJ5XHJcbiAgICAgIGNvbnN0IHN1bW1hcnlTdGFydFJvdyA9IHBheW1lbnRzLmxlbmd0aCArIDM7XHJcbiAgICAgIGNvbnN0IHN1bW1hcnlIZWFkZXIgPSBzaGVldC5nZXRSYW5nZShgQSR7c3VtbWFyeVN0YXJ0Um93fTpCJHtzdW1tYXJ5U3RhcnRSb3d9YCk7XHJcbiAgICAgIHN1bW1hcnlIZWFkZXIudmFsdWVzID0gW1tcIkFjY291bnRcIiwgXCJCYWxhbmNlXCJdXTtcclxuICAgICAgc3VtbWFyeUhlYWRlci5mb3JtYXQuZm9udC5ib2xkID0gdHJ1ZTtcclxuXHJcbiAgICAgIGNvbnN0IHN1bW1hcnlWYWx1ZXMgPSBbXHJcbiAgICAgICAgW1wiQVwiLCBhY2NvdW50cy5BXSxcclxuICAgICAgICBbXCJCXCIsIGFjY291bnRzLkJdXHJcbiAgICAgIF07XHJcbiAgICAgIGNvbnN0IHN1bW1hcnlCb2R5ID0gc2hlZXQuZ2V0UmFuZ2VCeUluZGV4ZXMoXHJcbiAgICAgICAgc3VtbWFyeVN0YXJ0Um93LFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgc3VtbWFyeVZhbHVlcy5sZW5ndGgsXHJcbiAgICAgICAgMlxyXG4gICAgICApO1xyXG4gICAgICBzdW1tYXJ5Qm9keS52YWx1ZXMgPSBzdW1tYXJ5VmFsdWVzO1xyXG5cclxuICAgICAgLy8gVGltZXN0YW1wXHJcbiAgICAgIGNvbnN0IHRzUm93ID0gc3VtbWFyeVN0YXJ0Um93ICsgc3VtbWFyeVZhbHVlcy5sZW5ndGggKyAyO1xyXG4gICAgICBzaGVldC5nZXRSYW5nZShgQSR7dHNSb3d9OkIke3RzUm93fWApLnZhbHVlcyA9IFtcclxuICAgICAgICBbXCJSZXBvcnQgZ2VuZXJhdGVkIGF0XCIsIG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKV1cclxuICAgICAgXTtcclxuXHJcbiAgICAgIHNoZWV0LmFjdGl2YXRlKCk7XHJcbiAgICAgIGF3YWl0IGNvbnRleHQuc3luYygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJFeGNlbCBzaGVldCByZXBvcnQgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseS5cIik7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXhjZWwucnVuIGZhaWxlZCwgYnV0IENTViB3YXMgc3RpbGwgZG93bmxvYWRlZC5cIiwgZXJyKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaW5pdGlhbGl6ZVVJIH0gZnJvbSBcIi4vdWlcIjtcclxuXHJcbi8vIGRlY2xhcmUgZ2xvYmFscyBmb3IgT2ZmaWNlIHNvIFRTIGRvZXNuJ3QgY29tcGxhaW5cclxuZGVjbGFyZSBjb25zdCBPZmZpY2U6IGFueTtcclxuXHJcbmZ1bmN0aW9uIHN0YXJ0V2ViQXBwKCkge1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgaW4gcHVyZSBXZWIgbW9kZS5cIik7XHJcbiAgICBpbml0aWFsaXplVUkoKTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gVHJ5IEV4Y2VsIC8gT2ZmaWNlIG1vZGUgZmlyc3RcclxuaWYgKHR5cGVvZiBPZmZpY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgT2ZmaWNlLm9uUmVhZHkpIHtcclxuICBPZmZpY2Uub25SZWFkeSgpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiT2ZmaWNlLmpzIG1vZGUgZGV0ZWN0ZWQgLSBzdGFydGluZyBpbiBFeGNlbCBhZGQtaW4gbW9kZS5cIik7XHJcbiAgICAgIGluaXRpYWxpemVVSSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoKSA9PiB7XHJcbiAgICAgIHN0YXJ0V2ViQXBwKCk7ICAgIC8vIElmIE9mZmljZS5vblJlYWR5IGZhaWxzLCBmYWxsYmFjayB0byB3ZWJcclxuICAgIH0pO1xyXG59IGVsc2Uge1xyXG4gIHN0YXJ0V2ViQXBwKCk7ICAgIC8vIE5vIE9mZmljZS5qcywgc3RhcnQgaW4gd2ViIG1vZGVcclxufVxyXG4iXSwibmFtZXMiOlsiYyIsImEiLCJiIiwiZCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInJlc3BvbnNlVHlwZSIsIm9ubG9hZCIsImciLCJyZXNwb25zZSIsIm9uZXJyb3IiLCJjb25zb2xlIiwiZXJyb3IiLCJzZW5kIiwic3RhdHVzIiwiZSIsImRpc3BhdGNoRXZlbnQiLCJNb3VzZUV2ZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFdmVudCIsImluaXRNb3VzZUV2ZW50Iiwid2luZG93IiwiZiIsInNlbGYiLCJnbG9iYWwiLCJuYXZpZ2F0b3IiLCJ0ZXN0IiwidXNlckFnZW50Iiwic2F2ZUFzIiwiSFRNTEFuY2hvckVsZW1lbnQiLCJwcm90b3R5cGUiLCJoIiwiaSIsIlVSTCIsIndlYmtpdFVSTCIsImoiLCJjcmVhdGVFbGVtZW50IiwibmFtZSIsImRvd25sb2FkIiwicmVsIiwiaHJlZiIsIm9yaWdpbiIsImxvY2F0aW9uIiwidGFyZ2V0IiwiY3JlYXRlT2JqZWN0VVJMIiwic2V0VGltZW91dCIsInJldm9rZU9iamVjdFVSTCIsIm1zU2F2ZU9yT3BlbkJsb2IiLCJhdXRvQm9tIiwid2FybiIsInR5cGUiLCJCbG9iIiwidGl0bGUiLCJib2R5IiwiaW5uZXJUZXh0IiwiSFRNTEVsZW1lbnQiLCJzYWZhcmkiLCJGaWxlUmVhZGVyIiwiayIsIm9ubG9hZGVuZCIsInJlc3VsdCIsInJlcGxhY2UiLCJyZWFkQXNEYXRhVVJMIiwibCIsIm0iLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwic2F2ZSIsImtleSIsInZhbHVlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJsb2FkIiwiZGVmYXVsdFZhbHVlIiwicmF3IiwiZ2V0SXRlbSIsInBhcnNlIiwiQVVUSF9LRVkiLCJWRU5ET1JfS0VZIiwiZ2V0VmVuZG9ycyIsImNyZWF0ZVZlbmRvcklkIiwiYmFzZSIsInRvTG93ZXJDYXNlIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiUEFZX0tFWSIsIkFDQ19LRVkiLCJJTklUSUFMX0JBTEFOQ0UiLCJnZXRBY2NvdW50c1N0YXRlIiwic3RvcmVkIiwiZnJlc2giLCJBIiwiQiIsImVuc3VyZUFjY291bnRzIiwiZ2V0UGF5bWVudHNSYXciLCJnZXRBbGxQYXltZW50cyIsImVsIiwiaWQiLCJnZXRFbGVtZW50QnlJZCIsIm9wdEVsIiwibG9nRGVidWciLCJtZXNzYWdlIiwiYm94IiwidGltZSIsIkRhdGUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJ0ZXh0Q29udGVudCIsInJlbmRlckJhbGFuY2VzIiwiYWNjIiwiaW5uZXJIVE1MIiwidG9Mb2NhbGVTdHJpbmciLCJyZW5kZXJWZW5kb3JzIiwibGlzdCIsInZlbmRvcnMiLCJwYXlTZWxlY3QiLCJoaXN0b3J5U2VsZWN0IiwiZm9yRWFjaCIsInYiLCJyb3ciLCJjbGFzc05hbWUiLCJhc3NpZ25lZEFjY291bnQiLCJhcHBlbmRDaGlsZCIsIm9wdCIsIm9wdDIiLCJyZW5kZXJQYXltZW50cyIsInBheW1lbnRzIiwiY29udGFpbmVySWQiLCJsZW5ndGgiLCJtYXAiLCJwIiwiYW1vdW50IiwiYWNjb3VudCIsInZlbmRvck5hbWUiLCJkYXRlIiwiam9pbiIsInJlbmRlckFsbFBheW1lbnRzIiwicmVuZGVyVmVuZG9ySGlzdG9yeSIsInZlbmRvcklkIiwiZGF0YSIsImZpbHRlciIsImdldFBheW1lbnRzQnlWZW5kb3IiLCJzaG93QXBwIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwidXNlciIsImdldEN1cnJlbnRVc2VyTmFtZSIsImxibCIsInNob3dMb2dpbiIsImluaXRpYWxpemVVSSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbWFpbCIsInRyaW0iLCJvayIsInBhc3N3b3JkIiwibG9naW4iLCJlcnIiLCJyZW1vdmVJdGVtIiwic29tZSIsIm5ld1ZlbmRvciIsInB1c2giLCJwZXJzaXN0VmVuZG9ycyIsImFkZFZlbmRvciIsImFtb3VudFN0ciIsImlzTmFOIiwidmVuZG9yIiwiZmluZCIsImFjY291bnRzIiwiYWNjb3VudENvZGUiLCJwYXltZW50Iiwibm93IiwidG9JU09TdHJpbmciLCJtYWtlUGF5bWVudCIsIk51bWJlciIsImFzeW5jIiwiY3N2IiwibGluZXMiLCJidWlsZENzdiIsImJsb2IiLCJFeGNlbCIsIk9mZmljZSIsImNvbnRleHQiLCJob3N0IiwicnVuIiwic2hlZXROYW1lIiwic2hlZXQiLCJ3b3JrYm9vayIsIndvcmtzaGVldHMiLCJoZWFkZXJSYW5nZSIsImdldFJhbmdlIiwidmFsdWVzIiwiZm9ybWF0IiwiZm9udCIsImJvbGQiLCJib2R5VmFsdWVzIiwiZ2V0UmFuZ2VCeUluZGV4ZXMiLCJzdW1tYXJ5U3RhcnRSb3ciLCJzdW1tYXJ5SGVhZGVyIiwic3VtbWFyeVZhbHVlcyIsInRzUm93IiwiYWN0aXZhdGUiLCJzeW5jIiwibG9nIiwiZG93bmxvYWRCYW5rU3RhdGVtZW50Q3N2Iiwic3RhcnRXZWJBcHAiLCJvblJlYWR5IiwidGhlbiIsImNhdGNoIl0sInNvdXJjZVJvb3QiOiIifQ==